---
title: 写好ChatGPT提示词之：prompt的迭代（Iterate）
date: 2023-12-30 10:00:00 +0800
categories: [AIGC, OpenAI]
tags: [chatgpt]
---

## 引言

prompt一般不可能一蹴而就的，就像机器学习那样，第一次设置的参数基本上都无法使用，都需要调参的过程，尤其是为了更好的符合自己的要求，prompt的关键词迭代也是如此，需要根据自己的实际需求去不断迭代以拟合自己的需求。

遵守一些基础规则开发的prompt，如果仍不能达到实际的使用要求，一定需要经历迭代策略之后，才能找到适合自己的任务的prompt，所以掌握迭代prompt的能力在开发提示词的过程中是必须的。

## 如何迭代prompt

一个基本的迭代过程一般是这样的：

1. 根据任务写出清晰具体的prompt；
2. 运行并分析结果为什么和预期的不一致；
3. 调整目标和prompt，并继续运行和分析；

循环以上过程，直到得出符合自己需求的prompt。

这里建议可以参考下所谓通用的提示词范例，但是注意没有一个完全通用的提示词适合所有场景。所以一定要自己开发适合自己任务的prompt，不仅是对完成任务来说，更重要的是自己能力的提升以及不断熟练开发prompt的过程。

这里举例子说明下迭代优化的一般过程：

```
我们的目标是建立一个周报机器人，帮助我们总结日常的工作，并在下一周的周一自动生成周报内容：
```

为了完成这一任务，需要做一些假设和任务提炼完善输入和输出：

1. 用户在上一周工作时，经常会记录自己的工作内容和结果；

所以我们先写出初版的prompt，这也是大部分人询问gpt的方式：

```
你是一个周报总结机器人，你需要根据用户这一周的工作描述，写出一份周报：

'''
完成“聊天界面”用例编写和测试，等待跟随版本上线；
完成了一个python脚本的开发，这个脚本主要是检查线上服务器在线人数；
“聊天界面”跟随版本上线，上线后出现一个用户聊天发送特殊词汇引起的bug，已经修正bug并外放；
优化开发分支翻译包生成工具。目前满足通过文件夹匹配指定区域的剧情任务内容发包
DND联动功能初步review和测试，目前完成度较低，功能串联、正式数值的配置还未完成
本地化译文外放内容处理。后续工具开发提供按单号打入翻译功能，确保外放单临时翻译处理不夹带大量译文内容，提高安全性
'''


```

![主题](/assets/image/2023/12/20231230203824.png)

这里我们看到gpt几乎原封不动的将我们的内容复述了一遍，没有做任何的我们预期它能做的优化。

首先我们分析下原因：

1. 系统提示词问题：
    
    系统提示词给出的信息只有一句“你是一个周报总结机器人”，实际上对于gpt来说这种上下文过于粗糙，各行各业，各种背景都可以套上去，如果你自己本身都不了解写周报的意义，那么prompt的结果自然也是不可能满足要求的，不妨问问chatgpt：

    ```
    user：你是一个游戏项目组QA，你需要每周完成自己的周报，展示给全组人，怎么做才能写出一个比较好的周报

    ChatGPT:
    作为一个游戏项目组的QA（Quality Assurance），编写高质量的周报非常重要。这不仅能够清晰地展示你的工作成果，还能帮助团队理解项目的进展和潜在问题。以下是一些编写有效周报的建议：
    1. 明确目标和受众
        1. 确定周报的主要目的是什么：是汇报进度、突出问题、还是分享知识？
        2. 考虑你的受众：他们最关心的是什么？不同角色可能对不同类型的信息更感兴趣。
    2. 结构化布局
        1. 简介：简单介绍周报的主要内容。
        2. 本周完成工作：
            1. 列出你这周的主要任务和完成情况。
            2. 包括测试计划、执行的测试用例数量、发现的缺陷数量等。
        3. 问题和挑战：
            1. 描述本周遇到的任何问题或挑战，以及你是如何解决它们的。
            2. 如果有未解决的问题，提出你的建议或需要的支持。
        4. 下周计划：
            1. 简述下周的工作重点。
            2. 如果有，包括即将到来的里程碑或重要日期。
        5. 其他信息：
            1. 分享任何值得注意的额外信息，如行业趋势、团队活动等。
    3. 清晰和简洁
        1. 使用清晰、简洁的语言。
        2. 避免过多的技术术语，或者至少对它们进行解释。
        3. 使用项目管理工具或缺陷跟踪系统中的数据来支持你的陈述。
    4. 可视化数据
        1. 使用图表、表格或列表来呈现关键数据，如缺陷趋势、测试覆盖率等。
        2. 这有助于快速传达复杂信息。
    5. 反馈和改进
        1. 提供机会让团队成员对你的周报给出反馈。
        2. 基于这些反馈不断改进你的周报格式和内容。
    6. 保持正面态度
        1. 即使在面对挑战时，也要保持积极向上的语气。
        2. 表扬团队成员的努力和成就。
    7. 定期回顾
        1. 定期回顾过去的周报，以了解进展和未来可能的改进点。
    记住，一个好的周报不仅是对工作的汇报，也是一个沟通工具，有助于增强团队协作和项目的透明度。通过有效的周报，你可以展示自己的专业性，同时为团队的成功贡献力量。
    ```

    根据ChatGPT的建议，结合我们在系统提示词中可以这样修改：

    ```
    你是服务于一个游戏项目组QA的周报总结机器人。游戏项目组QA会日常记录自己的工作和结果等，根据这些内容，在下一周的周一写出一个周报，这个周报作用是为了记录一周的工作的同时，也是向其他QA展示自己工作的展台，编写高质量的周报非常重要。这不仅能够清晰地展示你的工作成果，还能帮助团队理解项目的进展和潜在问题。所以要求上需要做到如下内容：
    1. 记录工作描述、完成进度和遇到的问题；
    2. 明确目标和受众是整个游戏项目组QA，包括你的领导和同事以及下属等；
    3. 结构化布局：
        1. 列出你这周的主要任务和完成情况。
        2. 描述本周遇到的任何问题或挑战，以及你是如何解决它们的。如果有未解决的问题，提出你的建议或需要的支持。
        3. 简述下周的工作重点。
    4. 态度上即使在面对挑战时，也要保持积极向上的语气。
    记住，一个好的周报不仅是对工作的汇报，也是一个沟通工具，有助于增强团队协作和项目的透明度。通过有效的周报，你可以展示自己的专业性，同时为团队的成功贡献力量。
    ```

    我们再试一次

    ![主题](/assets/image/2023/12/20231230210838.png)

    可以看出GPT已经能了解我们的项目背景和工作，但是系统提示词中对于工作重要性和这份工作的侧重点理解的还是不够深入，而且还导致编造一些内容的问题，对于给出的工作内容上重写的不够，更多的是格式上贴近我们的诉求，这些需要我们迭代下提示词：

    ```
    你是服务于一个游戏项目组QA的周报总结机器人。游戏项目组QA会日常记录自己的工作和结果等，根据这些内容，在下一周的周一写出一个周报，这个周报作用是为了记录一周的工作的同时，也是向其他QA展示自己工作的展台，编写高质量的周报非常重要。这不仅能够清晰地展示你的工作成果，还能帮助团队理解项目的进展和潜在问题。所以要求上需要做到如下内容：
    1. 明确目标和受众是整个游戏项目组QA，包括你的领导和同事以及下属等；
    2. 结构化布局：
        1. 重写工作描述：因为QA给出的是自己一周的工作记录，需要你理解工作内容，整理工作内容，重写工作内容，并且使得相关工作内容在一起，一般工作可以分为三大块测试需求相关，工具开发相关，管理人员相关。如果总结出其他分类也可以单独分类，如果工作内容中不存在这三大块内容，也可以不写这一块。
        所以在工作描述这一段，你需要做步骤是
            1. 尝试分条按照三大块内容分别分类：
                1. 测试需求相关：不开发需求，主要工作是做需求的质量保障，包括用例编写，功能回归，BUG修复等内容，不直接开发需求；
                2. 工具开发相关：开发一些项目组使用的脚本和工具相关，和需求以及需求bug等没有关系；
                3. 对下属的管理相关：明确有指出和哪位QA进行过沟通和分工；
                如果总结出其他分类也可以单独分类；
                如果工作内容中不在这三大块内容，可以根据内容分类；
                如果工作中不包含以上三条中的内容，不需要写；
            2. 整理工作内容：分别整理上述每一类的工作内容，调整顺序，使得内容有连贯性；
            3. 重写每条工作内容，提炼出重点后详述。
        2. 描述本周遇到的任何问题或挑战，以及你是如何解决它们的。如果有未解决的问题，提出你的建议或需要的支持。
        3. 如果工作中有记录下周的工作时，简述下周的工作重点。
    3. 态度上即使在面对挑战时，也要保持积极向上的语气。
    ```


未完待续。。。